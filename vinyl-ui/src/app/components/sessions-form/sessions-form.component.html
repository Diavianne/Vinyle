<form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <div class="title">
    <h2>{{ title }}</h2>
  </div>
  @if (showNameFields){
  <div class="half">
    <div class="item">
      <label for="firstname">PRÉNOM</label>
      <input type="text" id="firstname" formControlName="firstname" />
      @if (isInvalidAndTouchedOrDirty(formGroup.controls['firstname'])) {
      <small class="text-danger">
        @if (formGroup.controls['firstname'].errors?.['required']) {
        <span>Une valeur est requise</span>
        }
      </small>
      }
    </div>
    <div class="item">
      <label for="lastname">NOM</label>
      <input type="text" id="lastname" formControlName="lastname" />
      @if (isInvalidAndTouchedOrDirty(formGroup.controls['lastname'])) {
      <small class="text-danger">
        @if (formGroup.controls['lastname'].errors?.['required']) {
        <span>Une valeur est requise</span>
        }
      </small>
      }
    </div>
  </div>
  }
  <div class="half">
    <div class="item">
      <label for="email">ADRESSE EMAIL</label>
      <input type="email" id="email" formControlName="email" />
      @if (isInvalidAndTouchedOrDirty(formGroup.controls['email'])) {
      <small class="text-danger">
        @if (formGroup.controls['email'].errors?.['required']){
        <span>Une adresse email est requise</span>}
      </small>
      }
    </div>
    <div class="item">
      <label for="password">MOT DE PASSE</label>
      <div style="position: relative">
        <input
          [type]="showPassword ? 'text' : 'password'"
          id="password"
          formControlName="password"
          style="padding-right: 2.5rem"
        />
        <button
          type="button"
          (click)="togglePasswordVisibility()"
          style="
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
          "
          tabindex="-1"
          aria-label="Afficher ou masquer le mot de passe"
        >
          @if (!showPassword) {
          <i class="bi bi-eye"></i>
          <!-- œil fermé -->
          } @if (showPassword) {
          <i class="bi bi-eye-slash"></i>
          <!-- œil ouvert -->
          }
        </button>
      </div>
      @if (isInvalidAndTouchedOrDirty(formGroup.controls['password'])) {
      <small class="text-danger">
        @if (formGroup.controls['password'].errors?.['required']){
        <span>Une valeur est requise</span>
        } @if (formGroup.controls['password'].errors?.['minlength']){
        <span>Un mot de passe de 8 caractères minimum est requis</span>
        } @if (formGroup.controls['password'].errors?.['pattern']){
        <span>
          Le mot de passe doit contenir au moins une majuscule, une minuscule et
          une lettre
        </span>
        }
      </small>
      }
    </div>
  </div>

  <div class="action">
    <input type="submit" [value]="titleSubmit" />
    <input type="reset" value="ANNULER" />
    <input type="button" (click)="goBack()" value="RETOUR" />
  </div>
</form>
